IrradianceConvolution_v0

uses rotation and lookup table to find light direction from source cube map

cost: 

    Matrix * vector, lookup

compiler switch: SSE2

dest face 0: Took 0.999229
dest face 1: Took 1.020609
dest face 2: Took 1.013694
dest face 3: Took 1.009095
dest face 4: Took 0.988126
dest face 5: Took 0.986860
total convolution time: 6.017616
exterior duration = 6.017774

compiler switch: AVX

dest face 0: Took 0.943512
dest face 1: Took 0.932289
dest face 2: Took 0.939328
dest face 3: Took 0.945289
dest face 4: Took 1.037473
dest face 5: Took 0.940896
total convolution time: 5.738789

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0b

uses basis vectors per cubemap face to find light direction from source cube map

cost: 

    base transformation (comparable to Matrix * vector)

    vector normalization

compiler switch: SSE2

dest face 0: Took 2.674409
dest face 1: Took 2.648177
dest face 2: Took 2.628003
dest face 3: Took 2.635615
dest face 4: Took 2.766635
dest face 5: Took 2.686415
total convolution time: 16.039257
exterior duration = 16.039409

compiler switch: AVX

dest face 0: Took 2.484615
dest face 1: Took 2.488004
dest face 2: Took 2.568273
dest face 3: Took 2.561780
dest face 4: Took 2.508327
dest face 5: Took 2.572303
total convolution time: 15.183304

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0c

uses RayDir() to find light direction from source cube map

cost: 

    vector normalization

    switch statement

compiler switch: SSE2

dest face 0: Took 3.001385
dest face 1: Took 3.036090
dest face 2: Took 3.095273
dest face 3: Took 3.007577
dest face 4: Took 3.061742
dest face 5: Took 3.020160
total convolution time: 18.222229
exterior duration = 18.222387

compiler switch: AVX

dest face 0: Took 2.959971
dest face 1: Took 2.959024
dest face 2: Took 2.858923
dest face 3: Took 2.841131
dest face 4: Took 3.070839
dest face 5: Took 2.933902
total convolution time: 17.623792

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0d

Uses rotation and lookup table to find light direction from source cube map

Lookup table is only [0,width/2] (ie. 1/4 size)

cost: 

    Matrix * vector, lookup with input folding

compiler switch: SSE2

dest face 0: Took 1.104717
dest face 1: Took 1.099562
dest face 2: Took 1.093364
dest face 3: Took 1.107436
dest face 4: Took 1.116183
dest face 5: Took 1.146812
total convolution time: 6.668075
exterior duration = 6.668236

compiler switch: AVX

dest face 0: Took 1.128783
dest face 1: Took 1.102296
dest face 2: Took 1.101491
dest face 3: Took 1.077043
dest face 4: Took 1.074282
dest face 5: Took 1.065503
total convolution time: 6.549400

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0e

Swap loop order so that source loop is outer and dest loop is inner. This significantly reduces
the number of matrix * vector operations.

compiler switch: SSE2

Preecalculate destination normals. Took 0.000049
dest face 0: Took 0.738544
dest face 1: Took 0.718944
dest face 2: Took 0.706498
dest face 3: Took 0.665701
dest face 4: Took 0.477428
dest face 5: Took 0.782654
total convolution time: 4.089770
exterior duration = 4.089985

compiler switch: AVX

precalculate destination normals. Took 0.000043
dest face 0: Took 0.717835
dest face 1: Took 0.713791
dest face 2: Took 0.683492
dest face 3: Took 0.647577
dest face 4: Took 0.462625
dest face 5: Took 0.776745
total convolution time: 4.002067

--------------------------------------------------------------------------------------------------

IrradianceConvolution_v0e_b

Derived from v0e. Use basis vectors to construct light direction instead of lookup-table + rotation.

compiler switch: SSE2

precalculate destination normals. Took 0.000046
dest face 0: Took 0.727758
dest face 1: Took 0.619404
dest face 2: Took 0.718213
dest face 3: Took 0.662486
dest face 4: Took 0.455439
dest face 5: Took 0.766143
total convolution time: 3.949445
exterior duration = 3.949659

compiler switch: AVX

precalculate destination normals. Took 0.000034
dest face 0: Took 0.758007
dest face 1: Took 0.638960
dest face 2: Took 0.739641
dest face 3: Took 0.692328
dest face 4: Took 0.463551
dest face 5: Took 0.819803
total convolution time: 4.112292

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0e_c

Derived from v0e_b. Uses a lightweight lookup table that has solid angle only.

compiler switch: SSE2

precalculate destination normals. Took 0.000046
dest face 0: Took 0.716732
dest face 1: Took 0.607728
dest face 2: Took 0.725629
dest face 3: Took 0.653393
dest face 4: Took 0.443919
dest face 5: Took 0.762986
total convolution time: 3.910389
exterior duration = 3.910610

compiler switch: AVX

precalculate destination normals. Took 0.000036
dest face 0: Took 0.720460
dest face 1: Took 0.596008
dest face 2: Took 0.673890
dest face 3: Took 0.652537
dest face 4: Took 0.448482
dest face 5: Took 0.747396
total convolution time: 3.838798

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0e_d

Derived from v0e_b. Calculates solid angle directly instead of using lookup table.

compiler switch: SSE2

precalculate destination normals. Took 0.000048
dest face 0: Took 0.789785
dest face 1: Took 0.673671
dest face 2: Took 0.772168
dest face 3: Took 0.718881
dest face 4: Took 0.512546
dest face 5: Took 0.826095
total convolution time: 4.293146
exterior duration = 4.293363

compiler switch: AVX

precalculate destination normals. Took 0.000034
dest face 0: Took 0.869290
dest face 1: Took 0.671008
dest face 2: Took 0.762053
dest face 3: Took 0.731671
dest face 4: Took 0.541270
dest face 5: Took 0.836132
total convolution time: 4.411427

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v0e_e

Derived from v0e_c. Uses the smaller quadrant version of solid angle lookup table.

compiler switch: SSE2

precalculate destination normals. Took 0.000048
dest face 0: Took 0.708357
dest face 1: Took 0.600914
dest face 2: Took 0.692873
dest face 3: Took 0.645875
dest face 4: Took 0.447435
dest face 5: Took 0.744401
total convolution time: 3.839856
exterior duration = 3.840073

compiler switch: AVX

precalculate destination normals. Took 0.000034
dest face 0: Took 0.714764
dest face 1: Took 0.606571
dest face 2: Took 0.681859
dest face 3: Took 0.652821
dest face 4: Took 0.462139
dest face 5: Took 0.761566
total convolution time: 3.879721

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v1

Derivation of v0. Uses thread per dest face.

compiler switch: SSE2

dest face 0: Took 1.174393
dest face 1: Took 1.175885
dest face 2: Took 1.173264
dest face 3: Took 1.183861
dest face 4: Took 1.162576
dest face 5: Took 1.158917
total convolution time: 1.184927
exterior duration = 1.185083

compiler switch: AVX

dest face 0: Took 1.150163
dest face 1: Took 1.147397
dest face 2: Took 1.127826
dest face 3: Took 1.127503
dest face 4: Took 1.133993
dest face 5: Took 1.118597
total convolution time: 1.167209

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v2

Derivation of v0. Uses thread per source face.

cost:

    Has to create dest_width^2 threads

compiler switch: SSE2

dest face 0: Took 1.311897
dest face 1: Took 1.302464
dest face 2: Took 1.162126
dest face 3: Took 1.136271
dest face 4: Took 1.127353
dest face 5: Took 1.213746
total convolution time: 7.254172
exterior duration = 7.254204

compiler switch: AVX

dest face 0: Took 1.060365
dest face 1: Took 1.529202
dest face 2: Took 1.124677
dest face 3: Took 1.279810
dest face 4: Took 1.635191
dest face 5: Took 0.904679
total convolution time: 7.534260

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v3

Derivation of v2. Constructs tasks per source face, which are then divided between six threads that
run continously.

compiler switch: SSE2

thread 0: Took 1.258288
thread 1: Took 1.232248
thread 2: Took 1.254356
thread 3: Took 1.241774
thread 4: Took 1.243972
thread 5: Took 1.264128
total convolution time: 1.265891
exterior duration = 1.266055

compiler switch:AVX

thread 0: Took 1.209924
thread 1: Took 1.206061
thread 2: Took 1.221126
thread 3: Took 1.194779
thread 4: Took 1.193912
thread 5: Took 1.201282
total convolution time: 1.221989

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v3b

Matrix in row major instead of the usual column major. 

cost:

    Slightly different algorithm for Matrix * vector that is unoptimal for scalar code

compiler switch: SSE2

thread 0: Took 1.241548
thread 1: Took 1.238770
thread 2: Took 1.226924
thread 3: Took 1.205949
thread 4: Took 1.231864
thread 5: Took 1.249115
total convolution time: 1.252471
exterior duration = 1.252628

compiler switch: AVX

thread 0: Took 1.160426
thread 1: Took 1.165783
thread 2: Took 1.156243
thread 3: Took 1.148420
thread 4: Took 1.146807
thread 5: Took 1.151013
total convolution time: 1.166368

-----------------------------------------------------------------------------------------------------

IrradianceConvolution_v4

Derivation of v3b. Uses hand optimized vector intrinsics.

compiler switch: SSE2

thread 0: Took 0.975651
thread 1: Took 1.041653
thread 2: Took 1.021213
thread 3: Took 1.012318
thread 4: Took 1.033247
thread 5: Took 0.997085
total convolution time: 1.042307

compiler switch: AVX

thread 0: Took 1.056316
thread 1: Took 1.079120
thread 2: Took 1.086496
thread 3: Took 1.085055
thread 4: Took 1.047801
thread 5: Took 1.064990
total convolution time: 1.087296



